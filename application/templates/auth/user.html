{% extends "layout.html" %}

{% block body %}

<h1>Profile</h1>

<table style="margin-bottom: 30px;">
  <tr>
    <td style="padding: 5px 70px 5px 0px"><b>Name</b></td>
    <td>{{ user.name }}</td>
  </tr>
  <tr>
    <td style="padding: 5px 70px 5px 0px;"><b>Username</b></td>
    <td>{{ user.username }}</td>
  </tr>
  <tr>
    <td style="padding: 5px 70px 5px 0px;"><b>Member since</b></td>
    <td>{{ user.date_created }}</td>
  </tr>
</table>

<h2>My Products</h2>
<p>Selling {{ item_count }} items</p>

<table cellpadding="10">
  <tr>
    <th>Name</th>
    <th>Price</th>
    <th>Description</th>
    <th>Category</th>
  </tr>
  {% for product in user.products %}
  <tr>
    <td>{{ product.name }}</td>
    <td>{{ product.price }}</td>
    <td>{{ product.description }}</td>
    <td>{{ product.category.name }}</td>

    <td>
      <form method="POST" action="{{ url_for('products_set_description', 
    product_id=product.id) }}">
        <input type="text" name=newdesc placeholder="insert a new description" />
        <input type="submit" value=&#9998; />
      </form>
    </td>

    <td>
      <form method="POST" action="{{ url_for('products_delete', 
    product_id=product.id) }}">
        <button type="submit" value="Delete">Delete</button>
      </form>
    </td>
  </tr>

  {% endfor %}
</table>

{% endblock %}